# Comprehensive test schema for Java compilation testing
# This schema exercises all major gql2j features

# Custom directives (defined for parser validation)
directive @javaName(name: String!) on OBJECT | FIELD_DEFINITION | ENUM | ENUM_VALUE
directive @constraint(
  minLength: Int
  maxLength: Int
  min: Int
  max: Int
  pattern: String
  email: Boolean
  notBlank: Boolean
) on FIELD_DEFINITION

# Root query type (required by GraphQL)
type Query {
  user(id: ID!): User
  users: [User!]!
  post(id: ID!): Post
  search(query: String!): [SearchResult!]!
}

# Interface - generates Java interface
interface Node {
  id: ID!
}

interface Timestamped {
  createdAt: String!
  updatedAt: String
}

interface Authored {
  author: User!
}

# Object types - generate Java classes

"""
Represents a user in the system.
Users can create posts and have different roles.
"""
type User implements Node {
  "Unique identifier"
  id: ID!

  "User's display name"
  name: String!

  "Email address (unique)"
  email: String!

  "User's age in years"
  age: Int

  "Account balance"
  balance: Float

  "Whether the account is active"
  active: Boolean!

  "User's role in the system"
  role: UserRole!

  "Posts authored by this user"
  posts: [Post!]!

  "User's profile settings"
  profile: UserProfile

  "Tags associated with user"
  tags: [String!]!
}

"""
Represents a blog post.
"""
type Post implements Node & Timestamped & Authored {
  id: ID!
  title: String!
  content: String
  author: User!
  createdAt: String!
  updatedAt: String

  "Number of views"
  viewCount: Int!

  "Average rating (0-5)"
  rating: Float

  "Whether post is published"
  published: Boolean!

  "Post tags"
  tags: [String!]!

  "Related posts"
  relatedPosts: [Post!]!

  "Comments on this post"
  comments: [Comment!]!

  "Post category"
  category: Category!
}

type Comment implements Node & Timestamped & Authored {
  id: ID!
  content: String!
  author: User!
  post: Post!
  createdAt: String!
  updatedAt: String

  "Nested replies"
  replies: [Comment!]!

  "Number of likes"
  likes: Int!
}

type UserProfile {
  bio: String
  website: String
  location: String
  avatarUrl: String
  socialLinks: [String!]!
}

type Category implements Node {
  id: ID!
  name: String!
  description: String
  posts: [Post!]!
  parentCategory: Category
  subCategories: [Category!]!
}

# Union type for search results
union SearchResult = User | Post | Comment

# Enum types - generate Java enums

"""
User roles in the system
"""
enum UserRole {
  "Full system access"
  ADMIN

  "Standard user access"
  USER

  "Read-only access"
  GUEST

  "Suspended account"
  SUSPENDED
}

enum PostStatus {
  DRAFT
  PENDING_REVIEW
  PUBLISHED
  ARCHIVED
}

# Input types - generate Java classes

"""
Input for creating a new user
"""
input CreateUserInput {
  name: String!
  email: String!
  age: Int
  role: UserRole
  tags: [String!]
}

input UpdateUserInput {
  name: String
  email: String
  age: Int
  active: Boolean
  role: UserRole
}

input CreatePostInput {
  title: String!
  content: String!
  categoryId: ID!
  tags: [String!]
  published: Boolean
}

input UpdatePostInput {
  title: String
  content: String
  categoryId: ID
  tags: [String!]
  published: Boolean
}

input SearchInput {
  query: String!
  limit: Int
  offset: Int
  categories: [ID!]
  authorIds: [ID!]
  sortBy: String
  sortOrder: SortOrder
}

enum SortOrder {
  ASC
  DESC
}

input PaginationInput {
  page: Int!
  pageSize: Int!
}

# Type with various field types for thorough testing
type TypeShowcase {
  # Scalar types
  stringField: String
  stringNonNull: String!
  intField: Int
  intNonNull: Int!
  floatField: Float
  floatNonNull: Float!
  booleanField: Boolean
  booleanNonNull: Boolean!
  idField: ID
  idNonNull: ID!

  # List types
  stringList: [String]
  stringListNonNull: [String]!
  stringNonNullList: [String!]
  stringNonNullListNonNull: [String!]!

  intList: [Int!]!
  floatList: [Float!]!
  booleanList: [Boolean!]!
  idList: [ID!]!

  # Nested lists (list of lists)
  nestedList: [[String!]!]!

  # Object references
  objectRef: User
  objectRefNonNull: User!
  objectList: [User]
  objectListNonNull: [User!]!

  # Enum references
  enumRef: UserRole
  enumRefNonNull: UserRole!
  enumList: [UserRole!]!
}
